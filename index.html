<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>FoodGo – Home (Modern UI)</title>

  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    /* 
       iPhone frame
  */
    .iphone {
      width: 390px;
      height: 844px;
      border-radius: 40px;
      overflow: hidden;
      border: 3px solid #000;
      margin: auto;                     
      margin-top: 20px;
      -ms-overflow-style: none;
      scrollbar-width: none;
      background: #fafafa;
    }
    ::-webkit-scrollbar { display: none; }

    /* Screen reader only */
    .sr-only {
      position: absolute !important;
      width: 1px; height: 1px;
      padding: 0; margin: -1px;
      overflow: hidden;
      clip: rect(0,0,0,0);
      white-space: nowrap;
      border: 0;
    }

    /* --------------------------------
       Accessibility Modes
    ---------------------------------*/
    .iphone.high-contrast {
      background: #000 !important;
      color: #fff !important;
    }
    .iphone.high-contrast * {
      color: #fff !important;
      background-color: transparent !important;
    }

    .iphone.large-text {
      font-size: 1.08rem;
    }
    .iphone.large-text * {
      font-size: inherit;
    }

    .iphone.dyslexia-mode {
      font-family: system-ui, sans-serif !important;
      letter-spacing: 0.03em;
      line-height: 1.4;
    }

    /* --------------------------------
       Modern Card Hover Effects
    ---------------------------------*/
    .card {
      transition: transform .25s ease, box-shadow .3s ease;
    }
    .card:hover {
      transform: translateY(-4px);
      box-shadow: 0 10px 18px rgba(0,0,0,0.12);
    }
    .cat-active {
      background: #07c045;
      color: #fff !important;
    }

  </style>
</head>

<body class="bg-gray-900 flex justify-center items-center h-screen">

<div class="iphone relative shadow-2xl" role="application" aria-label="Foodgo modern home">

  <!-- Live announcements -->
  <div id="statusRegion" class="sr-only" aria-live="polite"></div>

  <!-- ------------------------------------------------------
       HEADER
  ------------------------------------------------------- -->
  <header class="p-5 flex justify-between items-center bg-white/70 backdrop-blur-md sticky top-0 z-20">
    <div>
      <h1 class="text-2xl font-extrabold tracking-tight">FoodGo</h1>
      <p class="text-xs text-gray-500">Taste delivered.</p>
    </div>

    <div class="flex items-center gap-3">
      <!-- Accessibility menu -->
      <button id="accessibilityToggle"
        class="w-9 h-9 rounded-full bg-gray-200 flex items-center justify-center shadow-md hover:bg-gray-300 transition focus-visible:ring-2 ring-orange-500"
        aria-label="Accessibility menu" aria-expanded="false" aria-controls="accessibilityPanel">
        <span class="material-icons text-gray-700">accessibility_new</span>
      </button>

      <!-- Profile -->
      <button id="goProfile" class="focus-visible:ring-2 ring-orange-500 rounded-full" aria-label="Profile" onclick="window.location.href='profile.html'">
        <img src="images/female.jpg" class="w-10 h-10 rounded-full shadow" alt="User avatar" />
      </button>
    </div>
  </header>

  <!-- Accessibility panel -->
  <section id="accessibilityPanel"
    class="absolute right-4 top-[75px] bg-white p-4 rounded-xl shadow-xl text-sm w-48 hidden z-30">
    <p class="font-semibold mb-2">Accessibility</p>
    <label class="flex items-center gap-2 mb-1 cursor-pointer">
      <input type="checkbox" id="toggleHighContrast" /> High contrast
    </label>
    <label class="flex items-center gap-2 mb-1 cursor-pointer">
      <input type="checkbox" id="toggleLargeText" /> Larger text
    </label>
    <label class="flex items-center gap-2 cursor-pointer">
      <input type="checkbox" id="toggleDyslexia" /> Dyslexia-friendly
    </label>
  </section>

  <!-- ------------------------------------------------------
       SEARCH BAR
  ------------------------------------------------------- -->
  <section class="px-5 mt-4">
    <div class="flex items-center bg-white shadow-lg px-4 py-3 rounded-3xl w-full gap-2">
      <span class="material-icons text-gray-500">search</span>

      <label for="searchBox" class="sr-only">Search items</label>
      <input id="searchBox" type="text"
        class="w-full outline-none text-sm"
        placeholder="Search food..." aria-label="Search food" />

      <!-- Voice search -->
      <button id="voiceBtn"
        class="p-2 rounded-full hover:bg-gray-100 focus-visible:ring-2 ring-orange-500 transition"
        aria-label="Voice search">
        <span class="material-icons text-gray-600">mic</span>
      </button>
    </div>
  </section>

  <!-- ------------------------------------------------------
       CATEGORY TABS (REDESIGNED)
  ------------------------------------------------------- -->
  <section class="px-5 mt-4 flex gap-5 overflow-x-auto no-scrollbar"
    id="categoryBar" role="tablist">

    <button class="cat-btn cat-active px-4 py-2 rounded-full text-xs font-medium bg-orange-500 text-white shadow-md"
      data-cat="All" role="tab" aria-selected="true">
      All
    </button>

    <button class="cat-btn px-4 py-2 rounded-full text-xs font-medium bg-gray-200 text-gray-800 shadow"
      data-cat="Combos" role="tab">
      Americans
    </button>

    <button class="cat-btn px-4 py-2 rounded-full text-xs font-medium bg-gray-200 text-gray-800 shadow"
      data-cat="Sliders" role="tab">
      Japanese
    </button>

    <button class="cat-btn px-4 py-2 rounded-full text-xs font-medium bg-gray-200 text-gray-800 shadow"
      data-cat="Chicken" role="tab">
      Korean
    </button>

  </section>

  <!-- ------------------------------------------------------
       PRODUCT GRID (IMPROVED UI)
  ------------------------------------------------------- -->
  <main id="productList"
    class="px-5 pt-5 pb-24 overflow-y-auto h-[63%]"
    aria-label="Food items list">
    <div class="grid grid-cols-2 gap-4 mt-6"></div>
  </main>

  <!-- ------------------------------------------------------
       BOTTOM NAV (MODERNIZED)
  ------------------------------------------------------- -->
  <nav class="absolute bottom-0 left-0 right-0">
    <div class="bg-white/90 backdrop-blur-md h-20 flex items-center justify-around shadow-xl">

      <button class="material-icons text-orange-500 text-3xl focus-visible:ring-2 ring-orange-500 rounded-full"
        aria-label="Home">home</button>

      <button id="navProfile"
        class="material-icons text-green-500 text-2xl focus-visible:ring-2 ring-orange-500 rounded-full"
        aria-label="Profile"onclick="window.location.href='support.html'">contact_page</button>

      <button class="material-icons text-gray-500 text-2xl focus-visible:ring-2 ring-orange-500 rounded-full"
        aria-label="Orders">receipt_long</button>

      <button class="material-icons text-bakck text-2xl focus-visible:ring-2 ring-orange-500 rounded-full"
        aria-label="Favorites"onclick="window.location.href='cart.html'">shopping_cart</button>
    </div>

    <!-- Floating (+) button -->
    <button
      class="floating-add-btn absolute left-1/2 -translate-x-1/2 -top-8 w-16 h-16 bg-orange-500 rounded-full shadow-2xl border-4 border-white flex items-center justify-center hover:scale-105 transition focus-visible:ring-2 ring-white"
      aria-label="Load more items">
      <span class="material-icons text-white text-3xl">add</span>
    </button>
  </nav>

</div>

<script>
/* Product database (same as your original) */
const products = [
  { id:1, name:"Thundoori Pizza", cat:"Combos", img:"images/pizza1.png", rating:"4.9", subtitle:"Wendy’s Pizza" },
  { id:2, name:"Hamburger", cat:"Combos", img:"images/burger1.jpg", rating:"4.8", subtitle:"Veggie Burger" },
  { id:3, name:"Cheese Pizza", cat:"Combos", img:"images/piza2.jpg", rating:"4.6", subtitle:"Chicken Cheese Pizza" },
  { id:4, name:"Fried Chicken Burger", cat:"Combos", img:"images/burger2.jpg", rating:"4.5", subtitle:"Crispy Burger" },
  { id:5, name:"Udon", cat:"Sliders", img:"images/udon.jpg", rating:"4.7", subtitle:"Cheesy Delight" },
  { id:6, name:"Soba", cat:"Sliders", img:"images/soba.jpg", rating:"4.6", subtitle:"Soup Noodles" },
  { id:7, name:"Tteokbokki (떡볶이)", cat:"Chicken", img:"images/tob.jpg", rating:"4.8", subtitle:"Hot & Spicy" },
  { id:8, name:"Korean Fried Chicken (양념치킨)", cat:"Chicken", img:"images/kfc.jpg", rating:"4.9", subtitle:"Sweet & Spicy" },
];

let extraProductsLoaded = false;

const moreProducts = [
  
  { id:10, name:"Chicken Wrap", cat:"Chicken", img:"images/tob.jpg", rating:"4.6", subtitle:"Crispy Chicken Wrap" },
  { id:11, name:"Veggie Combo Meal", cat:"Combos", img:"images/piza2.jpg", rating:"4.8", subtitle:"Healthy Choice" },
  
];

/* Screen-reader announcer */
function announce(msg) {
  document.getElementById("statusRegion").textContent = msg;
}

/* 
   Render Products
 */
function renderProducts(filter="All", search="") {
  const grid = document.querySelector("#productList .grid");
  grid.innerHTML = "";

  products
    .filter(p => filter==="All" || p.cat===filter)
    .filter(p => p.name.toLowerCase().includes(search.toLowerCase()))
    .forEach(p => {
      grid.innerHTML += `
      <article class="card bg-white rounded-2xl shadow-md overflow-hidden cursor-pointer"
        tabindex="0" role="button"
        aria-label="${p.name}, ${p.subtitle}, rated ${p.rating} stars"
        onclick="openProduct(${p.id})"
        onkeydown="if(event.key==='Enter' || event.key===' '){event.preventDefault();openProduct(${p.id});}">
        
        <img src="${p.img}" class="w-full h-28 object-cover" alt="${p.name}">
        
        <div class="p-3">
          <h3 class="font-semibold text-[14px]">${p.name}</h3>
          <p class="text-[11px] text-gray-950">${p.subtitle}</p>

          <div class="flex justify-between items-center mt-1">
            <span class="text-gray-700 text-xs flex items-center"><span class="material-icons text-yellow-500 text-lg">star</span> ${p.rating}</span>
            <span class="material-icons text-gray-400 text-sm">favorite_border</span>
          </div>
        </div>
      </article>`;
    });
}

renderProducts();

/* 
   Category Navigation
 */
const catBtns = document.querySelectorAll(".cat-btn");

catBtns.forEach((btn,index)=>{
  btn.addEventListener("click",()=> setCat(btn));
  
  // Keyboard (left/right)
  btn.addEventListener("keydown", e=>{
    if(e.key==="ArrowRight"||e.key==="ArrowLeft"){
      e.preventDefault();
      const dir = e.key==="ArrowRight" ? 1 : -1;
      const next = (index + dir + catBtns.length) % catBtns.length;
      catBtns[next].focus();
      setCat(catBtns[next]);
    }
  });
});

function setCat(btn){
  catBtns.forEach(b=> b.classList.remove("cat-active"));
  btn.classList.add("cat-active");

  renderProducts(
    btn.dataset.cat,
    document.getElementById("searchBox").value
  );
}

/* 
   Search
 */
document.getElementById("searchBox").addEventListener("input", (e)=>{
  const text = e.target.value;
  const cat = document.querySelector(".cat-active").dataset.cat;
  renderProducts(cat,text);
});

/*
   Open Product
 */
function openProduct(id){
  localStorage.setItem("selectedProduct",id);
  window.location.href="product.html";
}

/* 
   Profile Navigation
 
document.getElementById("goProfile").onclick =
document.getElementById("navProfile").onclick = () => {
  window.location.href="profile.html";
};
*/


/* 
   Load More (+)
 */
document.querySelector(".floating-add-btn").addEventListener("click",()=>{
  if(extraProductsLoaded){
    alert("All products loaded");
    announce("All products already loaded.");
    return;
  }

  products.push(...moreProducts);
  extraProductsLoaded = true;

  const cat = document.querySelector(".cat-active").dataset.cat;
  const search = document.getElementById("searchBox").value;

  renderProducts(cat,search);
  announce("More products loaded.");
});

/* 
   Accessibility Panel
 */
const phone = document.querySelector(".iphone");
const accessToggle = document.getElementById("accessibilityToggle");
const accessPanel = document.getElementById("accessibilityPanel");

accessToggle.addEventListener("click",()=>{
  const show = accessPanel.classList.contains("hidden");
  accessPanel.classList.toggle("hidden", !show);
  accessToggle.setAttribute("aria-expanded", show);
});

document.getElementById("toggleHighContrast").addEventListener("change", e=>{
  phone.classList.toggle("high-contrast", e.target.checked);
  announce(e.target.checked ? "High contrast enabled" : "High contrast disabled");
});

document.getElementById("toggleLargeText").addEventListener("change", e=>{
  phone.classList.toggle("large-text", e.target.checked);
  announce(e.target.checked ? "Large text enabled" : "Large text disabled");
});

document.getElementById("toggleDyslexia").addEventListener("change", e=>{
  phone.classList.toggle("dyslexia-mode", e.target.checked);
  announce(e.target.checked ? "Dyslexia-friendly mode enabled" : "Dyslexia mode disabled");
});

/* 
   Voice Search
 */
document.getElementById("voiceBtn").addEventListener("click",()=>{
  const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
  if(!SR){
    alert("Voice search not supported.");
    announce("Voice search not supported.");
    return;
  }

  const recog = new SR();
  recog.lang="en-US";
  recog.onstart = ()=> announce("Voice search started");
  recog.onerror = ()=> announce("Voice search error");
  recog.onresult = (e)=>{
    const text = e.results[0][0].transcript;
    document.getElementById("searchBox").value=text;
    const cat = document.querySelector(".cat-active").dataset.cat;
    renderProducts(cat,text);
    announce("Showing results for " + text);
  };
  recog.start();
});
</script>


<!-- TODAY OFFER POPUP -->
<div id="offerPopup"
  class="fixed inset-0 bg-black/60 z-50 hidden flex items-center justify-center"
  role="dialog"
  aria-modal="true"
  aria-labelledby="offerTitle">

  <div class="bg-white rounded-3xl w-[60%] max-w-sm p-6 shadow-2xl text-center relative">

    <h2 id="offerTitle"
      class="text-2xl font-extrabold text-orange-500 mb-2">
      Today’s Special Offer
    </h2>

    <p class="text-gray-800 text-sm mb-4">
      Get <b class="text-red-500">20% OFF</b> on your first order today only!
    </p>

    <img src="images/burger1.jpg"
         alt="Today food offer"
         class="w-full h-25 object-cover rounded-xl mb-4">

    <div class="flex gap-3">
    <button id="cancelOfferBtn"
        class="absolute top-4 right-4 w-8 h-8 rounded-full
               bg-white/80 hover:bg-white shadow
               flex items-center justify-center
               focus-visible:ring-2 ring-orange-500"
        aria-label="Close offer">
        <span class="material-icons text-gray-700 text-lg">close</span>
      </button>
      <button id="viewOfferBtn"
        class="flex-1 bg-orange-500 text-white py-3 rounded-2xl font-semibold">
        View Offer
      </button>
    </div>

  </div>
</div>


<script>
/* ---------------------------
   TODAY OFFER POPUP (FIXED & SAFE)
----------------------------*/
document.addEventListener("DOMContentLoaded", () => {

  const offerPopup = document.getElementById("offerPopup");
  const cancelOfferBtn = document.getElementById("cancelOfferBtn");
  const viewOfferBtn = document.getElementById("viewOfferBtn");

  if (!offerPopup || !cancelOfferBtn || !viewOfferBtn) return;

  function shouldShowOffer() {
    return (
      localStorage.getItem("foodgoLoggedIn") === "yes" &&
      localStorage.getItem("showTodayOffer") === "true"
    );
  }

  function showOfferPopup() {
    offerPopup.classList.remove("hidden");
    cancelOfferBtn.focus();
  }

  function hideOfferPopup() {
    offerPopup.classList.add("hidden");
  }

  cancelOfferBtn.onclick = () => {
    localStorage.removeItem("showTodayOffer");
    hideOfferPopup();
  };

  viewOfferBtn.onclick = () => {
    localStorage.removeItem("showTodayOffer");
    window.location.href = "product.html";
  };

  if (shouldShowOffer()) {
    setTimeout(showOfferPopup, 600);
  }
});
</script>

</body>
</html>
