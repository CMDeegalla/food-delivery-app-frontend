<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Profile - FoodGo</title>

<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

<style>
  .iphone {
    width: 390px;
    height: 844px;
    border-radius: 40px;
    overflow: hidden;
    border: 2px solid black;
  }
</style>
</head>

<body class="bg-gray-200 flex justify-center items-center h-screen">

<div class="iphone bg-white relative">

  <!-- HEADER AREA -->
  <div class="bg-gray-700 h-48 relative flex justify-between items-start px-5 pt-5">

    <!-- Back Button -->
    <button onclick="history.back()"
            class="bg-white w-10 h-10 rounded-full shadow flex items-center justify-center active:scale-95">
      <span class="material-icons text-gray-700 text-lg">arrow_back</span>
    </button>

    <!-- Settings -->
    <button class="bg-white w-10 h-10 rounded-full shadow flex items-center justify-center active:scale-95"
            onclick="alert('Settings page can be added next!')">
      <span class="material-icons text-gray-700 text-lg">settings</span>
    </button>

    <!-- Profile Picture -->
    <div class="absolute -bottom-14 left-1/2 -translate-x-1/2">
      <img src="images/female.jpg"
           class="w-32 h-32 rounded-3xl border-2 border-white shadow-xl object-cover" alt="Profile">
    </div>

  </div>

  <!-- FORM SECTION -->
  <div class="pt-20 px-6 space-y-4">

    <input id="name" type="text" value="Sophia Patel" disabled
           class="w-full bg-gray-100 rounded-xl px-4 py-3 text-sm shadow-sm outline-none disabled:opacity-70">

    <input id="email" type="email" value="sophiapatel@gmail.com" disabled
           class="w-full bg-gray-100 rounded-xl px-4 py-3 text-sm shadow-sm outline-none disabled:opacity-70">

    <input id="address" type="text" value="123 Main St Apartment 4A, New York, NY" disabled
           class="w-full bg-gray-100 rounded-xl px-4 py-3 text-sm shadow-sm outline-none disabled:opacity-70">

    <input id="password" type="password" value="password123" disabled
           class="w-full bg-gray-100 rounded-xl px-4 py-3 text-sm shadow-sm outline-none disabled:opacity-70">

    <!-- Menu Buttons -->
    <button onclick="window.location.href='payment.html'"
            class="w-full flex justify-between items-center text-sm text-gray-700 py-3 border-b">
      Payment Details
      <span class="material-icons text-gray-500 text-base">chevron_right</span>
    </button>

    <button onclick="window.location.href='orders.html'"
            class="w-full flex justify-between items-center text-sm text-gray-700 py-3 border-b">
      Order History
      <span class="material-icons text-gray-500 text-base">chevron_right</span>
    </button>

  </div>

  <!-- ACTION BUTTONS -->
  <div class="absolute bottom-10 w-full px-6 flex justify-between items-center">

    <button id="editBtn"
      class="bg-gray-700 text-white text-sm px-5 py-3 rounded-xl flex items-center gap-2 active:scale-95"
      onclick="toggleEdit()">
      <span id="editIcon" class="material-icons text-base">edit</span>
      <span id="editText">Edit Profile</span>
    </button>

    <button onclick="logout()"
            class="border border-orange-500 bg-orange-500 text-white text-sm px-6 py-3 rounded-xl flex items-center gap-2 active:scale-95">
      Log out
      <span class="material-icons text-white text-base">logout</span>
    </button>

  </div>

</div>

<script>
  const PROFILE_KEY = "foodgo_profile";
  let isEditing = false;

  function getProfileDefaults() {
    return {
      name: "Sophia Patel",
      email: "sophiapatel@gmail.com",
      address: "123 Main St Apartment 4A, New York, NY",
      password: "password123"
    };
  }

  function loadProfile() {
    const saved = localStorage.getItem(PROFILE_KEY);
    const profile = saved ? JSON.parse(saved) : getProfileDefaults();

    document.getElementById("name").value = profile.name;
    document.getElementById("email").value = profile.email;
    document.getElementById("address").value = profile.address;
    document.getElementById("password").value = profile.password;
  }

  function setInputsDisabled(disabled) {
    ["name", "email", "address", "password"].forEach(id => {
      document.getElementById(id).disabled = disabled;
    });
  }

  function toggleEdit() {
    isEditing = !isEditing;

    const editText = document.getElementById("editText");
    const editIcon = document.getElementById("editIcon");

    if (isEditing) {
      setInputsDisabled(false);
      editText.textContent = "Save";
      editIcon.textContent = "save";
    } else {
      // Save profile
      const profile = {
        name: document.getElementById("name").value.trim(),
        email: document.getElementById("email").value.trim(),
        address: document.getElementById("address").value.trim(),
        password: document.getElementById("password").value
      };

      if (!profile.name || !profile.email || !profile.address || !profile.password) {
        alert("Please fill all fields before saving.");
        isEditing = true;
        return;
      }

      localStorage.setItem(PROFILE_KEY, JSON.stringify(profile));
      setInputsDisabled(true);
      editText.textContent = "Edit Profile";
      editIcon.textContent = "edit";
      alert("Profile updated successfully!");
    }
  }

  function logout() {
    window.location.href = "auth.html";
  }
  loadProfile();
  setInputsDisabled(true);
</script>

</body>
</html>
